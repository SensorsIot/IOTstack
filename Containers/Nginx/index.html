
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docker stack for getting started on IOT on the Raspberry PI">
      
      
      
      
        <link rel="prev" href="../NextCloud/">
      
      
        <link rel="next" href="../Node-RED/">
      
      
      <link rel="icon" href="../../stack-24.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Nginx - IOTstack</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nginx" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IOTstack" class="md-header__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.063 1.456a1.75 1.75 0 0 1 1.874 0l8.383 5.316a1.75 1.75 0 0 1 0 2.956l-8.383 5.316a1.75 1.75 0 0 1-1.874 0L2.68 9.728a1.75 1.75 0 0 1 0-2.956Zm1.071 1.267a.25.25 0 0 0-.268 0L3.483 8.039a.25.25 0 0 0 0 .422l8.383 5.316a.25.25 0 0 0 .268 0l8.383-5.316a.25.25 0 0 0 0-.422Z"/><path d="M1.867 12.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/><path d="M1.867 16.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IOTstack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nginx
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SensorsIot/IOTstack" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SensorsIot/IOTstack
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Basic_setup/" class="md-tabs__link">
          
  
  
  Basic setup

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../AdGuardHome/" class="md-tabs__link">
          
  
  
  Containers

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Developers/" class="md-tabs__link">
          
  
  
  Developers

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Updates/" class="md-tabs__link">
          
  
  
  Updates

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IOTstack" class="md-nav__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.063 1.456a1.75 1.75 0 0 1 1.874 0l8.383 5.316a1.75 1.75 0 0 1 0 2.956l-8.383 5.316a1.75 1.75 0 0 1-1.874 0L2.68 9.728a1.75 1.75 0 0 1 0-2.956Zm1.071 1.267a.25.25 0 0 0-.268 0L3.483 8.039a.25.25 0 0 0 0 .422l8.383 5.316a.25.25 0 0 0 .268 0l8.383-5.316a.25.25 0 0 0 0-.422Z"/><path d="M1.867 12.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/><path d="M1.867 16.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/></svg>

    </a>
    IOTstack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SensorsIot/IOTstack" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SensorsIot/IOTstack
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Basic setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Basic setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Accessing-your-Device-from-the-internet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing your device from the internet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Backup-and-Restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backing up and restoring IOTstack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Custom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom overrides
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Default-Configs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Default ports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Menu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Menu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Networking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Understanding-Containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is Docker?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/What-is-sudo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is sudo?
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Containers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AdGuardHome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AdGuard Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Adminer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adminer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Blynk_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blynk server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chronograf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chronograf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DashMachine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DashMachine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Deconz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    deCONZ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DiyHue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DIY hue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Domoticz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Domoticz
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Dozzle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dozzle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Duckdns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Duck DNS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ESPHome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ESPHome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EspruinoHub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Espruinohub
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Gitea/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitea
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grafana
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Heimdall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Heimdall
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Home-Assistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home Assistant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Homebridge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Homebridge
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Homer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Homer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../InfluxDB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InfluxDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../InfluxDB2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    InfluxDB 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Kapacitor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kapacitor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MJPEG-Streamer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Motion JPEG Streamer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MariaDB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MariaDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Mosquitto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mosquitto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MotionEye/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MotionEye
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../NextCloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nextcloud
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      references
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-ports" class="md-nav__link">
    <span class="md-ellipsis">
      default ports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      environment variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-model" class="md-nav__link">
    <span class="md-ellipsis">
      reference model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domain-name-service" class="md-nav__link">
    <span class="md-ellipsis">
      domain name service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-proxy-basics" class="md-nav__link">
    <span class="md-ellipsis">
      reverse proxy basics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      getting started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#addCert" class="md-nav__link">
    <span class="md-ellipsis">
      add SSL certificate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      adding hosts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-maintenance" class="md-nav__link">
    <span class="md-ellipsis">
      container maintenance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forgotPassword" class="md-nav__link">
    <span class="md-ellipsis">
      if you forget your password
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanSlate" class="md-nav__link">
    <span class="md-ellipsis">
      starting over from a clean slate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Node-RED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node-RED
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Octoprint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Octoprint
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenHab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    openHAB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PgAdmin4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pgAdmin4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Pi-hole/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pi-hole
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Plex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Portainer-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Portainer agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Portainer-ce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Portainer CE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PostgreSQL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RTL_433-docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RTL_433 Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ring-MQTT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ring-MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Scrypted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scrypted
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Syncthing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Syncthing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TasmoAdmin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TasmoAdmin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Telegraf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Telegraf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Timescaledb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timescaledb
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../WireGuard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WireGuard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../WordPress/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WordPress
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../X2go/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    x2go
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ZeroTier-vs-WireGuard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZeroTier vs WireGuard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ZeroTier/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZeroTier
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Zigbee2MQTT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee2MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Zigbee2mqttassistant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zigbee2Mqtt Assistant
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/BuildStack-RandomPassword/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Stack Random Services Password
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/BuildStack-Services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Stack Services system
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/Git-Setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/Menu-System/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Menu system
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/PostBuild-Script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Postbuild BASH Script
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Updates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Updates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updating the project
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/Changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/New-Menu-Release-Notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    New IOTstack Menu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/gcgarner-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating from gcgarner to SensorsIot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/migration-network-change/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration: network change
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      references
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-ports" class="md-nav__link">
    <span class="md-ellipsis">
      default ports
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      environment variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-model" class="md-nav__link">
    <span class="md-ellipsis">
      reference model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domain-name-service" class="md-nav__link">
    <span class="md-ellipsis">
      domain name service
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reverse-proxy-basics" class="md-nav__link">
    <span class="md-ellipsis">
      reverse proxy basics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      getting started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#addCert" class="md-nav__link">
    <span class="md-ellipsis">
      add SSL certificate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      adding hosts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-maintenance" class="md-nav__link">
    <span class="md-ellipsis">
      container maintenance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forgotPassword" class="md-nav__link">
    <span class="md-ellipsis">
      if you forget your password
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanSlate" class="md-nav__link">
    <span class="md-ellipsis">
      starting over from a clean slate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="nginx">Nginx<a class="headerlink" href="#nginx" title="Permanent link">&para;</a></h1>
<p>Nginx is a reverse proxy service. From the perspective of a client (browser), an Nginx server appears to be a standard web server but its behaviour is that of an intermediary, relaying client requests to the web service the client <em>actually</em> wants to reach.</p>
<h2 id="references">references<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Nginx:</p>
<ul>
<li><a href="https://nginxproxymanager.com">Documentation</a></li>
<li><a href="https://hub.docker.com/r/jc21/nginx-proxy-manager">Dockerhub</a></li>
<li><a href="https://github.com/NginxProxyManager/nginx-proxy-manager">GitHub</a></li>
</ul>
</li>
<li>
<p><a href="https://letsencrypt.org">Let's Encrypt</a></p>
</li>
<li>
<p><a href="https://github.com/Paraphraser/ssl-certificates">Creating private self-signed SSL certificates</a></p>
</li>
</ul>
<h2 id="default-ports">default ports<a class="headerlink" href="#default-ports" title="Permanent link">&para;</a></h2>
<p>The IOTstack implementation listens on the following ports:</p>
<ul>
<li><code>80</code> the common front end for HTTP-based traffic</li>
<li><code>443</code> the common front end for HTTPS-based traffic</li>
<li>
<p><code>81</code> the administrative interface for Nginx</p>
<blockquote>
<p>these are all "privileged" ports which means you may have trouble deploying this container in a "Docker Desktop" environment.</p>
</blockquote>
</li>
</ul>
<h2 id="environment-variables">environment variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h2>
<p>You can expect Nginx to work out of the box without any special configuration. The IOTstack service definition includes these environment variables:</p>
<div class="language-yaml highlight"><pre><span></span><code><span class="nt">environment</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TZ=${TZ:-Etc/UTC}</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INITIAL_ADMIN_EMAIL=admin@example.com</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INITIAL_ADMIN_PASSWORD=changeme</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DISABLE_IPV6=true</span>
</code></pre></div>
<p>Although you can change them if you wish, the email address and password only have effect on first launch, and only up until your first login when you are guided through the process of defining the first user and a (hopefully) stronger password.</p>
<p>Unless you have good reasons for enabling IPv6, it is recommended that you leave it disabled.</p>
<h2 id="reference-model">reference model<a class="headerlink" href="#reference-model" title="Permanent link">&para;</a></h2>
<p>The network model shown in <a href="#figure1">Figure 1</a> will help you to understand how to configure Nginx.</p>
<table>
<thead>
<tr>
<th style="text-align: center;"><a name="figure1"></a>Figure 1: Network Model</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="Network reference model" src="../images/nginx-reference-model.png" /></td>
</tr>
</tbody>
</table>
<p>The model consists of two hosts, <code>pi1</code> and <code>pi2</code>. each of which is running three Docker containers. This model was constructed to show how you would set up Nginx to reach services running under various conditions. All these services could just as easily be running on a single computer and, rather than being hosted on physical computers (eg Raspberry Pi), the hosts could be implemented as a virtual guests in a Proxmox-VE system.</p>
<h2 id="domain-name-service">domain name service<a class="headerlink" href="#domain-name-service" title="Permanent link">&para;</a></h2>
<p>You <strong>will</strong> need a Domain Name System service to make effective use of Nginx. You can use implementations like Pi-hole, BIND9 (Berkeley Internet Name Daemon - the grandparent of all DNS servers) or any other equivalent service. Your DNS service can be native or running in a container. It can be private, public, on-site or off-site.</p>
<p>This document uses the domain <code>your.home.arpa</code> throughout. Substiute your own domain accordingly. This guide assumes a DNS service which can resolve the following resource records:</p>
<div class="language-text highlight"><pre><span></span><code>$ORIGIN your.home.arpa.

pi1           IN  A      192.168.203.60
pi2           IN  A      192.168.203.61

esphome       IN  CNAME  pi1.your.home.arpa.
gitea         IN  CNAME  pi1.your.home.arpa.
grafana       IN  CNAME  pi1.your.home.arpa.
nginx         IN  CNAME  pi1.your.home.arpa.
nodered       IN  CNAME  pi1.your.home.arpa.
pihole        IN  CNAME  pi1.your.home.arpa.
</code></pre></div>
<p>The above list uses BIND9 syntax. In words:</p>
<ul>
<li>
<p>all the names in the left-hand column imply <code>your.home.arpa</code>. For example:</p>
<ul>
<li><code>pi1</code> implies <code>pi1.your.home.arpa</code>.</li>
</ul>
</li>
<li>
<p><code>pi1</code> and <code>pi2</code> are actual hosts which are reachable at the associated IP addresses (the "A" means "address"). For example:</p>
<ul>
<li><code>pi1.your.home.arpa</code> is reachable at 192.168.203.60</li>
</ul>
</li>
<li>
<p>the remaining names are aliases. That is, when presented with a domain name which maps to a CNAME record, the DNS also looks-up the corresponding A record. For example:</p>
<ul>
<li><code>esphome.your.home.arpa</code> looks up <code>pi1.your.home.arpa</code> and returns 192.168.203.60</li>
</ul>
</li>
</ul>
<p>In terms of Pi-hole:</p>
<ul>
<li>
<p>for versions 2024.07.0 and earlier, you manage:</p>
<ul>
<li><code>A</code> records via <code>Local DNS</code> » <code>DNS Records</code>; and</li>
<li><code>CNAME</code> records via <code>Local DNS</code> » <code>CNAME Records</code></li>
</ul>
</li>
<li>
<p>for later versions, <code>Settings</code> » <code>Local DNS Records</code> manages both <code>A</code> and <code>CNAME</code> records.</p>
</li>
</ul>
<p>If you use another DNS server you will need to work it out for yourself.</p>
<h2 id="reverse-proxy-basics">reverse proxy basics<a class="headerlink" href="#reverse-proxy-basics" title="Permanent link">&para;</a></h2>
<p>When you type a URL like either of the following into the search bar of your browser:</p>
<div class="language-text highlight"><pre><span></span><code>http://esphome.your.home.arpa
https://esphome.your.home.arpa
</code></pre></div>
<ol>
<li>The default port of 80 is assumed (for HTTP) or 443 (for HTTPS);</li>
<li>Via the <code>CNAME</code> lookup, the DNS supplies the IP adddress of the host <code>pi1</code> (192.168.203.60) so your client's system can direct IP datagrams to the host where the Nginx service is running;</li>
<li>
<p>The Nginx service listening on port 80 (or 443) on <code>pi1</code> still sees the original URL of:</p>
<div class="language-text highlight"><pre><span></span><code>http://esphome.your.home.arpa
</code></pre></div>
<p>and can use the <strong>string</strong> <code>esphome.your.home.arpa</code> to work out how to redirect the connection to the <code>esphome</code> <strong>service</strong> which, in this example, is running on the same host and is listening on port 6052.</p>
</li>
</ol>
<h2 id="getting-started">getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>Nginx uses port 81 for its administrative interface. To manage Nginx you connect to the host where the Nginx service is running using port 81. For example:</p>
<div class="language-text highlight"><pre><span></span><code>http://pi1.your.home.arpa:81
</code></pre></div>
<p>Login with the default credentials:</p>
<ul>
<li>Email address: <code>admin@example.com</code></li>
<li>Password: <code>changeme</code></li>
</ul>
<p>You will be presented with an "Edit User" dialog where you should set the fields according to your requirements. That dialog is followed by a "Change Password" dialog where you enter <code>changeme</code> into the "Current Password" field, then supply a new password of appropriate strength.</p>
<p>See also <a href="#forgotPassword">if you forget your password</a>.</p>
<h2 id="addCert">add SSL certificate<a class="headerlink" href="#addCert" title="Permanent link">&para;</a></h2>
<p>Although it is not essential, it is a good idea to provision at least one SSL certificate before you start to use the Nginx reverse proxy manager. This is usually a so-called <em>wildcard</em> certificate, meaning it will authenticate hosts matching <code>*.your.home.arpa</code>. Nginx supports both <a href="https://letsencrypt.org">Let's Encrypt</a> and private <em>self-signed</em> SSL certificates:</p>
<ul>
<li>
<p>The exact mechanisms for obtaining certificates from <a href="https://letsencrypt.org">Let's Encrypt</a> are beyond the scope of this documentation. Google is your friend.</p>
</li>
<li>
<p>See <a href="https://github.com/Paraphraser/ssl-certificates">Creating private self-signed SSL certificates</a> for a guide to setting up and deploying a scheme of self-signed SSL certificates.</p>
</li>
</ul>
<p>Once you have decided on your approach, use <a href="#figure2">Figure 2</a> as your guide.</p>
<table>
<thead>
<tr>
<th style="text-align: center;"><a name="figure2"></a>Figure 2: Add SSL certificate</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="Add SSL certificate" src="../images/nginx-add-ssl-cert.png" /></td>
</tr>
</tbody>
</table>
<ol>
<li>Click on the "SSL Certificates" tab <!--A-->&#x1F130;.</li>
<li>Click <kbd>Add SSL Certificate</kbd> <!--B-->&#x1F131; and choose one of the options <!--C-->&#x1F132;.</li>
<li>
<p>If you are provisioning a Let's Encrypt certificate:</p>
<ul>
<li>fill in the fields <!--D-->&#x1F133; and <!--E-->&#x1F134;</li>
<li>optionally enable the DNS challenge <!--F-->&#x1F135;</li>
<li>agree to the Ts&amp;Cs <!--G-->&#x1F136; and</li>
<li>click <kbd>Save</kbd> <!--H-->&#x1F137;.</li>
</ul>
</li>
<li>
<p>If you are provisioning a self-signed certificate:</p>
<ul>
<li>provide a name at <!--I-->&#x1F138; (eg "*.your.home.arpa")</li>
<li>click <kbd>Browse</kbd> <!--J-->&#x1F139;, then navigate to and select the private key associated with your wildcard certificate</li>
<li>click <kbd>Browse</kbd> <!--K-->&#x1F13A;, then navigate to and select your wildcard certificate</li>
<li>in most home networks you won't need to provide an intermediate certificate so you can leave that empty; and</li>
<li>click <kbd>Save</kbd> <!--L-->&#x1F13B;.</li>
</ul>
</li>
</ol>
<h2 id="adding-hosts">adding hosts<a class="headerlink" href="#adding-hosts" title="Permanent link">&para;</a></h2>
<p>Use <a href="#figure3">Figure 3</a> as your guide.</p>
<table>
<thead>
<tr>
<th style="text-align: center;"><a name="figure3"></a>Figure 3: Add proxy host</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="Add proxy host" src="../images/nginx-add-proxy-host.png" /></td>
</tr>
</tbody>
</table>
<ol>
<li>Click on "Hosts"     <!--A-->&#x1F130; and choose "Proxy Hosts" from the menu <!--B-->&#x1F131;.</li>
<li>Click <kbd>Add Proxy Host</kbd> <!--C-->&#x1F132;.</li>
<li>The "Details" tab <!--D-->&#x1F133; should be selected by default but, if not, select it.</li>
<li>
<p>In the "Domain Names" field <!--E-->&#x1F134;, type the fully-qualified <strong>alias</strong> (or "CNAME") name of the service. For example:</p>
<div class="language-text highlight"><pre><span></span><code>esphome.your.home.arpa
</code></pre></div>
<blockquote>
<p>There is a small trick to this. As you type the characters of the domain name, the name will be repeated in a drop-down menu below the field. Once you have finished typing the domain name <em>in</em> the field, click on the completed domain name in the drop-down menu <em>below</em> the field. </p>
</blockquote>
</li>
<li>
<p><a href="#table1">Table 1</a> shows how the "Scheme" <!--F-->&#x1F135;, "Forward Hostname or IP" <!--G-->&#x1F136; and "Forward Port" fields <!--H-->&#x1F137; should be completed.</p>
<table>
<thead>
<tr>
<th style="text-align: center;"><a name="table1"></a>Table 1: Nginx forwarding</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="Nginx forwarding" src="../images/nginx-forwarding.png" /></td>
</tr>
</tbody>
</table>
<p>The choice of <em>scheme</em> <!--F-->&#x1F135; depends on whether the <em>service</em> you are trying to provision expects HTTP or HTTPS. In the <a href="#figure1">reference model</a>, only <code>gitea</code> expects HTTPS; all the others expect HTTP.</p>
<p>The general rules are:</p>
<ol>
<li>If Nginx is trying to reach itself, use <code>localhost</code> or 127.0.0.1 or the container name (<code>nginx</code>) and the internal (container) port where the administrative GUI is to be found.</li>
<li>
<p>Nginx is a non-host-mode Docker container so if it is trying to reach:</p>
<ul>
<li>another non-host-mode service on the <em>same</em> host then use the <code>«containerName»</code> and internal port. The example here is Node-RED.</li>
<li>a host-mode or native service on the <em>same</em> host then use the special name <code>host.docker.internal</code> and the host port on which the service is listening. The example here is ESPHome.</li>
<li>a service on a <em>different</em> host then use the fully-qualified domain name of that other host plus the external port (if the service is running in a non-host-mode container) or host port (if the service is either native or running in a host-mode container).</li>
</ul>
</li>
</ol>
</li>
<li>
<p>In almost all cases, you will want to enable "Websockets Support" <!--I-->&#x1F138;.</p>
</li>
<li>Switch to the "SSL" tab <!--J-->&#x1F139;.</li>
<li>The "SSL Certificate" field is a popup menu. Choose the relevant (or only) certificate you <a href="#addCert">provisioned earlier</a>.</li>
<li>If the destination service expects HTTPS traffic (ie the choice you made at <!--F-->&#x1F135;) you can also enable "Force SSL" <!--L-->&#x1F13B; to prevent attempts to use HTTP.</li>
<li>Click <kbd>Save</kbd> <!--M-->&#x1F13C;.</li>
</ol>
<p>Each proxy host that you provision appears in the list. You can test connections locally by clicking on the service name in the "Source" column.</p>
<h2 id="container-maintenance">container maintenance<a class="headerlink" href="#container-maintenance" title="Permanent link">&para;</a></h2>
<p>You can maintain the Nginx container with normal <code>pull</code> commands:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
<span class="gp">$ </span>docker<span class="w"> </span>compose<span class="w"> </span>pull<span class="w"> </span>nginx
<span class="gp">$ </span>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>nginx
<span class="gp">$ </span>docker<span class="w"> </span>system<span class="w"> </span>prune<span class="w"> </span>-f
</code></pre></div>
<h2 id="forgotPassword">if you forget your password<a class="headerlink" href="#forgotPassword" title="Permanent link">&para;</a></h2>
<p>If you forget your password, you really only have two choices:</p>
<ol>
<li>You can erase the persistent store and start from a <a href="#cleanSlate">clean slate</a>; or</li>
<li>You can attempt to replace your lost password with a known value.</li>
</ol>
<p>To replace your password with a known value:</p>
<ol>
<li>
<p>You will need the <code>whois</code> package:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>whois
</code></pre></div>
</li>
<li>
<p>Define the following variables:</p>
<div class="language-console highlight"><pre><span></span><code><span class="go">DB=&quot;$HOME/IOTstack/volumes/nginx/data/database.sqlite&quot;</span>
<span class="go">EMAIL=&quot;user@domain&quot;</span>
</code></pre></div>
<p>where <code>user@domain</code> is the email address associated with the password you have forgotten. If you have also forgotten the email address, you can recover a list of email addresses by running:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>sqlite3<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DB</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;SELECT email FROM user;&quot;</span>
</code></pre></div>
</li>
<li>
<p>The <code>whois</code> package provides the <code>mkpasswd</code> utility, which you will use to generate a hash for your desired password:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nv">HASH</span><span class="o">=</span><span class="k">$(</span>mkpasswd<span class="w"> </span>-m<span class="w"> </span>bcrypt<span class="k">)</span>
<span class="go">Password: </span>
</code></pre></div>
<p>Type your desired password at the <code>Password:</code> prompt and press <kbd>return</kbd>. The hashed version of your password will be copied to the <code>HASH</code> environment variable.</p>
</li>
<li>
<p>Run the following command:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>sudo<span class="w"> </span>sqlite3<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DB</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;UPDATE auth SET secret=\&quot;</span><span class="nv">$HASH</span><span class="s2">\&quot; WHERE user_id=(SELECT id FROM user WHERE email = \&quot;</span><span class="nv">$EMAIL</span><span class="s2">\&quot;);&quot;</span>
</code></pre></div>
</li>
<li>
<p>Restart the container:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
<span class="gp">$ </span>docker<span class="w"> </span>compose<span class="w"> </span>restart<span class="w"> </span>nginx
</code></pre></div>
</li>
</ol>
<p>Providing you don't make any mistakes, the database will be updated with the hash corresponding with the desired password you typed in step 3. </p>
<h2 id="cleanSlate">starting over from a clean slate<a class="headerlink" href="#cleanSlate" title="Permanent link">&para;</a></h2>
<p>Starting from a clean slate means you lose all the certificates and hosts you have provisioned. You will need to set up everything again from scratch.</p>
<p>Proceed as follows:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
<span class="gp">$ </span>docker<span class="w"> </span>compose<span class="w"> </span>down<span class="w"> </span>nginx
<span class="gp">$ </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>./volumes/nginx
<span class="gp">$ </span>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>nginx
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "tabs", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../javascript/fix-codeblock-console-copy-button.js"></script>
      
    
  </body>
</html>