nextcloud:
  image: nextcloud
  container_name: nextcloud
  ports:
    - "9321:80"
  volumes:
    - ./volumes/nextcloud/html:/var/www/html:rw
    - ./volumes/nextcloud/db:/var/lib/mysql # This line is removed during compile
  restart: unless-stopped
  depends_on: 
    - nextcloud_db
  links:
    - nextcloud_db
  networks:
    - iotstack_nw
    - nextcloud_internal
  environment:
    - MYSQL_HOST=nextcloud_db
    - MYSQL_PASSWORD=Unset
    - MYSQL_DATABASE=nextcloud
    - MYSQL_USER=nextcloud
    - MYSQL_ROOT_PASSWORD=Unset # This line is removed during compile

nextcloud_db:
  image: linuxserver/mariadb
  container_name: nextcloud_db
  volumes:
    - Unset:/var/lib/mysql # This line 'Unset' is updated during compile
  environment:
    - MYSQL_ROOT_PASSWORD=Unset
    - MYSQL_PASSWORD=Unset
    - MYSQL_DATABASE=nextcloud
    - MYSQL_USER=nextcloud
  restart: unless-stopped
  networks:
    - nextcloud_internal

 